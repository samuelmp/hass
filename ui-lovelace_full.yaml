button_card_templates: !include includes/fulldash/button_card_templates.yaml

custom_header:
  compact_mode: true
  editor_warnings: false
  exceptions:
    # - conditions:
    #     user_agent: Lenovo
    #   config:
    #     disable_sidebar: true
    #     hide_header: true
    #     kiosk_mode: true
    - conditions:
        user: tablet
      config:
        disable_sidebar: true
        kiosk_mode: true
        hide_header: true
    # - conditions:
    #     device_id: e98effc3-b940ce40
    #   config:
    #     disable_sidebar: true
    #     kiosk_mode: true

title: Milhouse
theme: tablet

kiosk_mode:
  user_settings:
    - users:
        - "Tablet"
      hide_header: true
      hide_sidebar: true

views:
  #############################################################################################################################################
  #                                                                                                                                           #
  #                                                              Floorplan View                                                               #
  #                                                                                                                                           #
  #############################################################################################################################################

  - title: Control Rooms
    icon: "mdi:floor-plan"
    panel: true
    badges: []
    cards:
      - type: picture-elements
        image: /local/fulldash/ui/floorplan/main_night.png
        card_mod:
          style:
            hui-image $: |
              :host {
                {% if states('sun.sun') == 'below_horizon' %}
                background-image: url(/local/background14.jpg);
                background-size: cover;
                {% else %}
                background-image: url(/local/background5.jpg);
                {% endif %}
              }
              img {
                filter: brightness(1.25);
              }
        elements:
          ##########################    DAY BASE FLOORPLAN OVERLAY    #########################

          - action: none
            entity: sun.sun
            hold_action:
              action: none
            state_image:
              above_horizon: /local/fulldash/ui/floorplan/floorplan_day.png
              below_horizon: /local/fulldash/transparent.png
            style:
              height: 100%
              left: 50%
              mix-blend-mode: lighten
              opacity: "${ states['sensor.sunlight_opacity'].state }"
              top: 50%
              width: 100%
            tap_action:
              action: none
            type: image

          ##########################    WEATHER ANIMATIONS    #########################

          - action: none
            entity: weather.casa
            hold_action:
              action: none
            image: /local/fulldash/transparent.png
            state_image:
              "rainy": /local/fulldash/ui/floorplan/weather/rainstorm.gif
            style:
              left: 44%
              mix-blend-mode: color-dodge
              top: 50%
              width: 110%
            tap_action:
              action: none
            type: image

          ##########################    INDIVIDUAL LIGHTS - BLENDED IMAGE OVERLAYS    #########################

          ######### ENTRADA ########

          - type: "custom:config-template-card"
            entities:
              - light.bombilla_entrada
            element:
              action: none
              entity: light.bombilla_entrada
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/entrada.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.bombilla_entrada'].attributes.hs_color
                  ? states['light.bombilla_entrada'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.bombilla_entrada'].attributes.hs_color ? states['light.bombilla_entrada'].attributes.hs_color[1] + 130 : 130) + "%)"}
                mix-blend-mode: lighten
                opacity: "${states['light.bombilla_entrada'].state === 'on' ? (states['light.bombilla_entrada'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten

          - entity: light.bombilla_entrada
            icon: mdi:lightbulb-outline
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 53%
              top: 41%
              opacity: 1
            template:
              - light
          - type: state-label
            entity: sensor.temperature_158d000171f1b3
            style:
              font-size: 1.5vw
              font-weight: 600
              text-align: center
              left: 57%
              top: 35%
              width: 15%
              color: transparent
              text-shadow: 0 0 1px rgba(255,255,255,0.5)
              background-clip: text

              ########## TELE ##########
          - type: "custom:config-template-card"
            entities:
              - light.luz_tele_2
            element:
              action: none
              entity: light.luz_tele_2
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/tv.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.luz_tele_2'].attributes.hs_color
                  ? states['light.luz_tele_2'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.luz_tele_2'].attributes.hs_color ? states['light.luz_tele_2'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.luz_tele_2'].state === 'on' ? (states['light.luz_tele_2'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.luz_tele_2
            icon: mdi:led-strip-variant
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 34%
              top: 63%
              opacity: 1
            template:
              - light
          - type: state-label
            entity: sensor.nest_temperature
            style:
              font-size: 1.5vw
              font-weight: 600
              text-align: center
              left: 42.5%
              top: 60%
              width: 15%
              color: transparent
              text-shadow: 0 0 1px rgba(255,255,255,0.5)
              background-clip: text

          ########## ORDENADORES ##########

          - type: "custom:config-template-card"
            entities:
              - light.tira_led_ordenadores
            element:
              action: none
              entity: light.tira_led_ordenadores
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/mario.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.tira_led_ordenadores'].attributes.hs_color
                  ? states['light.tira_led_ordenadores'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.tira_led_ordenadores'].attributes.hs_color ? states['light.tira_led_ordenadores'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.tira_led_ordenadores'].state === 'on' ? (states['light.tira_led_ordenadores'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.tira_led_ordenadores
            icon: mdi:led-strip-variant
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 59%
              top: 68%
              opacity: 1
            template:
              - light
          ########## DANIEL ##########
          - type: "custom:config-template-card"
            entities:
              - light.bombilla_pekes
            element:
              action: none
              entity: light.bombilla_pekes
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/daniel.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.bombilla_pekes'].attributes.hs_color
                  ? states['light.bombilla_pekes'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.bombilla_pekes'].attributes.hs_color ? states['light.bombilla_pekes'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.bombilla_pekes'].state === 'on' ? (states['light.bombilla_pekes'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.bombilla_pekes
            icon: mdi:lightbulb-outline
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 70%
              top: 45%
              opacity: 1
            template:
              - light

          ########## BOMBILLA SALON ##########

          - type: "custom:config-template-card"
            entities:
              - light.bombilla_salon
            element:
              action: none
              entity: light.bombilla_salon
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/comedor.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.bombilla_salon'].attributes.hs_color
                  ? states['light.bombilla_salon'].attributes.hs_color[0] - 30  : 0) + "deg)
                  saturate(" + (states['light.bombilla_salon'].attributes.hs_color ? states['light.bombilla_salon'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.bombilla_salon'].state === 'on' ? (states['light.bombilla_salon'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.bombilla_salon
            icon: mdi:lightbulb-outline
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 34%
              top: 51%
              opacity: 1
            template:
              - light

          ########## BOMBILLA COCINA ##########

          - type: "custom:config-template-card"
            entities:
              - light.tira_led_cocina
            element:
              action: none
              entity: light.tira_led_cocina
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/cocina.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.tira_led_cocina'].attributes.hs_color
                  ? states['light.tira_led_cocina'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.tira_led_cocina'].attributes.hs_color ? states['light.tira_led_cocina'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.tira_led_cocina'].state === 'on' ? (states['light.tira_led_cocina'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.tira_led_cocina
            icon: mdi:led-strip-variant
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 45%
              top: 29%
              opacity: 1
            template:
              - light

          ########## PLAFON DORMITORIO ##########

          - type: "custom:config-template-card"
            entities:
              - light.plaflon_dormitorio
            element:
              action: none
              entity: light.plaflon_dormitorio
              hold_action:
                action: none
              image: /local/fulldash/ui/floorplan/lights/principal.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.plaflon_dormitorio'].attributes.hs_color
                  ? states['light.plaflon_dormitorio'].attributes.hs_color[0] - 30 : 0) + "deg)
                  saturate(" + (states['light.plaflon_dormitorio'].attributes.hs_color ? states['light.plaflon_dormitorio'].attributes.hs_color[1] + 130 : 130) + "%)"}
                opacity: "${states['light.plaflon_dormitorio'].state === 'on' ? (states['light.plaflon_dormitorio'].attributes.brightness / 255) : '0'}"
              tap_action:
                action: none
              type: image
            style:
              top: 50%
              left: 50%
              width: 100%
              pointer-events: none
              mix-blend-mode: lighten
          - entity: light.plaflon_dormitorio
            icon: mdi:light-recessed
            type: custom:button-card
            hold_action:
              action: more-info
            style:
              left: 70%
              top: 38%
              opacity: 1
            template:
              - light

          ########## TERRAZA ##########

          # - type: state-label
          #   entity: sensor.temperatura_exterior_temperature
          #   value_template: >
          #     {{ states('sensor.temperatura_exterior_temperature')|round(1) }}
          #   style:
          #     font-size: 1.4vw
          #     font-weight: 600
          #     text-align: center
          #     left: 34.2%
          #     top: 94.6%
          #     width: 15%
          #     color: transparent
          #     text-shadow: 0 0 1px rgba(255,255,255,0.5)
          #     background-clip: text
          - type: custom:button-card
            entity: sensor.temperatura_exterior_temperature
            value: number
            layout: icon_state
            show_state: true
            show_name: false
            show_label: false
            show_icon: false
            tap_action:
              action: none
            style:
              left: 31.2%
              top: 93.4%
              width: 15%

            styles:
              border: 1px solid blue
              state:
                - font-size: 1.4vw
                - font-weight: 600
                - text-align: center
                - background-color: rgba(0, 0, 0, .3)
                - border-radius: 2vw
                - padding: .4vw .7vw
                - color: rgba(255, 255, 255, 0.5)
            state_display: >
              [[[
                return (entity.state ? Number.parseFloat(entity.state).toFixed(1) : "-") + " " + entity.attributes.unit_of_measurement;
              ]]]
          ### ALL TEMPERATURE ###
          - type: custom:button-card
            entity: sensor.temperaturas
            value: number
            icon: mdi:home-thermometer-outline
            layout: icon_state
            show_state: true
            show_name: false
            show_label: false
            tap_action:
              action: none
            style:
              right: 1%
              bottom: 0%
              width: 11%
              height: 10%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(0, 0, 0, .3)
              --custom-inactive-color: rgba(255,255,255, .65)
              --icon-primary-color: rgba(255, 255, 255, .9)
            styles:
              grid:
                - grid-template-columns: 40% 55%
              state:
                - justify-self: start
                - padding-left: 0
                - font-size: 1.3vw
                - color: var(--icon-primary-color)
                - font-weight: 600;
                - width: 100%;
              icon:
                - color: #FFFFFF
                - margin: .4rem .1rem .4rem 0rem
                - width: 55%
              card:
                - padding: 2% 0px
          ### ALL SOCKETS ###

          - type: custom:button-card
            entity: sensor.count_sockets_on
            value: number
            icon: mdi:power-socket-eu
            layout: icon_name_state
            state:
              - value: 0
                styles:
                  name:
                    - color: var(--custom-inactive-color)
                  icon:
                    - --icon-primary-color: var(--custom-inactive-color)
                tap_action:
                  action: none
            name: >
              [[[
                if (entity.state > 0)
                  return parseInt(entity.state) + 2;
                else
                  return 2;
              ]]]
            tap_action:
              action: call-service
              service: switch.turn_off
              target:
                entity_id: switch.todos_los_enchufes
            style:
              right: 1%
              bottom: 9%
              width: 7%
              height: 8%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(0, 0, 0, .3)
              --custom-inactive-color: rgba(255,255,255, .65)
              --icon-primary-color: rgba(255, 255, 255, .9)
            styles:
              grid:
                - grid-template-columns: 50% 50%
              name:
                - justify-self: start
                - padding-left: 0
                - font-size: 1.3vw
                - color: var(--icon-primary-color)
                - font-weight: 600;
                - width: 100%;
              icon:
                - color: #FFFFFF
                - margin: .4rem .1rem .4rem 1rem;
                - width: 60%
              card:
                - padding: 2% 0px
          ### ALL LIGHTS ###
          - type: custom:button-card
            entity: sensor.count_lights_on
            value: number
            icon: mdi:lightbulb-group-outline
            layout: icon_name_state
            show_state: true
            show_name: false
            show_units: false
            state:
              - value: 0
                styles:
                  name:
                    - color: var(--custom-inactive-color)
                  icon:
                    - --icon-primary-color: var(--custom-inactive-color)
                tap_action:
                  action: none
            tap_action:
              action: call-service
              service: light.turn_off
              target:
                entity_id: light.todas_las_luces
            style:
              right: 1%
              bottom: 16%
              width: 7%
              height: 8%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(0, 0, 0, .3)
              --custom-inactive-color: rgba(255,255,255, .35)
              --icon-primary-color: rgba(255, 255, 255, .9)
            styles:
              grid:
                - grid-template-columns: 50% 50%
              name:
                - justify-self: start
                - padding-left: 0
                - font-size: 1.3vw
                - color: var(--icon-primary-color)
                - font-weight: 600;
                - width: 100%;
              icon:
                - color: #FFFFFF
                - margin: .4rem .1rem .4rem 1rem;
                - width: 60%
              card:
                - padding: 2% 0px
          ##### ENCHUFES
          - type: custom:button-card
            entity: switch.enchufe_nevera
            icon: mdi:flash
            show_state: false
            show_name: false
            show_units: false
            tap_action:
              action: none
            style:
              left: 50.2%
              top: 45%
              width: 4%
              height: 4%
            styles:
              card:
                - animation: |
                    [[[
                      if (states['switch.enchufe_nevera'].state == 'on' ) return 'blink 5s ease infinite';
                    ]]]
                - --icon-primary-color: |
                    [[[
                      return (states['switch.enchufe_nevera'].state == 'on') ? '#CBE54E' : '#CC2A49BB';
                    ]]]
          ## ENCHUFE COCINA
          - type: custom:button-card
            entity: switch.smart_plug_1908219105371225185548e1e90240bc_outlet
            icon: mdi:flash
            show_state: false
            show_name: false
            show_units: false
            style:
              left: 45.5%
              top: 23%
              width: 4%
              height: 4%
            styles:
              card:
                - animation: |
                    [[[
                      if (states['switch.smart_plug_1908219105371225185548e1e90240bc_outlet'].state == 'on' ) return 'blink 5s ease infinite';
                    ]]]
                - --icon-primary-color: |
                    [[[
                      return (states['switch.smart_plug_1908219105371225185548e1e90240bc_outlet'].state == 'on') ? '#CBE54E' : '#CC2A49BB';
                    ]]]
          - type: custom:button-card
            entity: switch.enchufe_ordenadores_outlet
            icon: mdi:flash
            show_state: false
            show_name: false
            show_units: false
            extra_styles: |
              @keyframes myBlink {
                0%, 70%, 85%, 100% {
                  opacity: 1;
                }
                75%, 95% {
                  opacity: .2;
                }
              }
            style:
              left: 61.7%
              top: 74.5%
              width: 4%
              height: 4%
            styles:
              card:
                - animation: |
                    [[[
                      if (states['switch.enchufe_ordenadores_outlet'].state == 'on' ) return 'blink 5s ease infinite';
                    ]]]
                - --icon-primary-color: |
                    [[[
                      return (states['switch.enchufe_ordenadores_outlet'].state == 'on') ? '#CBE54E' : '#CC2A49BB';
                    ]]]
          - type: custom:button-card
            entity: switch.enchufe_pekes_outlet
            icon: mdi:flash
            show_state: false
            show_name: false
            show_units: false
            extra_styles: |
              @keyframes myBlink {
                0%, 70%, 85%, 100% {
                  opacity: 1;
                }
                75%, 95% {
                  opacity: .2;
                }
              }
            style:
              left: 61.7%
              top: 58%
              width: 4%
              height: 4%
            styles:
              card:
                - animation: |
                    [[[
                      if (states['switch.enchufe_pekes_outlet'].state == 'on' ) return 'blink 5s ease infinite';
                    ]]]
                - --icon-primary-color: |
                    [[[
                      return (states['switch.enchufe_pekes_outlet'].state == 'on') ? '#CBE54E' : '#CC2A49BB';
                    ]]]
          #################################################################
          #                                                               #
          #                      LIGHTS SIDEBAR                           #
          #                                                               #
          #################################################################
          #########################    BG IMAGE    ########################
          - action: none
            hold_action:
              action: none
            # image: /local/fulldash/ui/sidebar/sidebarBG2.png
            image: /local/fulldash/transparent.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
              background-color: rgba(40, 40, 40, .3)
            tap_action:
              action: none
            type: image

            #########################    TIME AND DATE    #########################

          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.7)"
              font-size: 5vw
              font-weight: 200
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 6.4%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.5)"
              font-size: 1.6vw
              font-weight: 300
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 12.2%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label

          #########################    MENU BUTTONS    #########################

          - type: custom:button-card
            icon: mdi:floor-plan
            name: "Control habitaciones"
            layout: icon_name
            tap_action: none
            style:
              left: 1.4%
              top: 19%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .15)
              --custom-inactive-menu: rgba(255,255,255, 1)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: "#FFFFFF"
                - font-weight: 400;
              icon:
                - color: "#FFFFFF"
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px
          - type: custom:button-card
            icon: mdi:robot-vacuum
            name: "Limpieza"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/1
            style:
              left: 1.4%
              top: 29%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .5)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px
          - type: custom:button-card
            icon: mdi:view-dashboard-outline
            name: "Domótica"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/2
            style:
              left: 1.4%
              top: 39%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .5)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px

            #########################    People at home    #########################

          - type: custom:mushroom-person-card
            entity: person.samuelmp
            secondary_info: last-updated
            icon_type: entity-picture
            layout: vertical
            style:
              left: 6.8%
              top: 72%
              --card-primary-font-weight: 400
              --card-secondary-font-weight: 400
              --icon-size: 4vw
          - type: custom:mushroom-person-card
            entity: person.paloma
            secondary_info: last-updated
            icon_type: entity-picture
            layout: vertical
            style:
              left: 15.8%
              top: 72%
              --card-primary-font-weight: 400
              --card-secondary-font-weight: 400
              --icon-size: 4vw

            # - action: none
            #   image: /local/fulldash/transparent.png
            #   style:
            #     background-color: 'rgba(255, 255, 255, 0.0)'
            #     border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
            #     border-radius: 10vw
            #     height: 4.2vw
            #     left: 15.9%
            #     top: 72.2%
            #     width: 4.2vw
            #   tap_action: none
            #   type: image
            # - action: none
            #   image: /local/fulldash/transparent.png
            #   style:
            #     background-color: 'rgba(255, 255, 255, 0.0)'
            #     border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
            #     border-radius: 10vw
            #     height: 4.2vw
            #     left: 21.1%
            #     top: 72.2%
            #     width: 4.2vw
            #   tap_action: none
            #   type: image

            #########################    Minigraph to show temperature inside and out    #########################

          - type: custom:mini-graph-card
            color_thresholds:
              - color: "#4dd2ff"
                value: 10
              - color: "#ffa31a"
                value: 20
              - color: "#ff1a1a"
                value: 28
            entities:
              - entity: sensor.nest_temperature
                color: "#0c87f7"
              - entity: sensor.nest_humidity
                color: "#ec085d"
                y_axis: secondary
              - entity: sensor.daystate_100
                color: grey
                name: Day
                show_legend: false
                show_line: false
                show_points: false
                y_axis: secondary
            icon: "mdi:home-thermometer-outline"
            name: Un nombre
            show:
              icon: true
              legend: false
              name: false
            card_mod:
              style: |
                :host {
                  left: 11.6%;
                  top:  92.5%;
                  width: 23.7%;
                  overflow: hidden;
                  height: 15%;
                  background: none  !important;
                  box-shadow: none !important;
                }
                .header {
                  font-size: 1vw;
                  position: absolute !important;
                  width: 5% !important;
                  padding: 0 !important;
                  right: 16% !important;
                  top: 15% !important;
                }
                ha-card {
                  background: none  !important;
                  padding: 0 !important;
                }
                .icon > ha-icon {
                  width:1.8vw !important;
                  height:1.8vw !important;
                }
                .state__time{
                  font-size:0.9vw !important;
                  margin-top: 0.2vw;
                  font-weight: 300 !important;
                  opacity: 0.4 !important;
                }
                .states {
                  font-size: 0.5vw !important;
                  padding: 1vw 0vw 0vw 0vw  !important;
                  margin: auto !important;
                  width: 80%;
                }
            # tap_action:
            #   action: navigate
            #   navigation_path: /lovelace-full/4

            #########################    Mini Weather card    #########################

          - type: "custom:simple-weather-card"
            backdrop: false
            entity: weather.casa
            name: " "
            card_mod:
              style: |
                :host {
                  left: 11%;
                  top:  86%;
                  width: 19%;
                  height: 7% !important;
                  overflow: hidden;
                  height: 8.5vw;
                  background: none  !important;
                  box-shadow: none !important;
                  font-size: 1vw !important;
                }
                ha-card {
                  background: none  !important;
                  box-shadow: none !important;
                  flex-flow: row-reverse !important;
                  padding: 0 !important;
                }
                .weather__info--add{
                  display : none !important;
                }
                .weather__info{
                  flex-grow: 1;
                  min-height: 0 !important;
                  height: 2.4vw;
                  margin-left: 0.6vw;
                }
                .weather__icon{
                  margin-right:0.5% !important;
                  margin-top: -3%;
                  width: 2vw !important;
                  height: 2vw !important;
                  flex: 0 0 2vw !important;
                }

    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                            Roborock Clean Up View                                                           #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Clean Up
    icon: "mdi:robot-vacuum"
    panel: true
    cards:
      - type: picture-elements
        image: /local/fulldash/ui/floorplan/floorplan_night.png
        styles:
          - border: 1px solid red
        card_mod:
          style:
            hui-image $: |
              :host {
                {% if states('sun.sun') == 'below_horizon' %}
                background-image: url(/local/background14.jpg);
                background-size: cover;
                {% else %}
                background-image: url(/local/background5.jpg);
                {% endif %}
              }
              img {
                filter: brightness(1.25);
              }

        elements:
          - action: none
            entity: sun.sun
            hold_action:
              action: none
            state_image:
              above_horizon: /local/fulldash/ui/floorplan/floorplan_day.png
              below_horizon: /local/fulldash/transparent.png
            style:
              height: 100%
              left: 50%
              mix-blend-mode: lighten
              opacity: "${ states['sensor.sunlight_opacity'].state + 0.15 }"
              top: 50%
              width: 100%
            tap_action:
              action: none
            type: image

          #######################################################################
          #                                                                     #
          #              Xiaomi Mi Robot : Zoned Cleanup Buttons                #
          #                            Enabled by:                              #
          #   https://www.home-assistant.io/integrations/vacuum.xiaomi_miio/    #
          #                                                                     #
          #######################################################################

          - type: image
            entity: input_text.room_cleaning
            action: none
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/transparent.png
              cargando: /local/fulldash/transparent.png
              volviendo: /local/fulldash/transparent.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano_uno: /local/fulldash/transparent.png
              bano_dos: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/ui/cleanUp/clean_casaSelected.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 61.9%
              top: 44.2%
              width: 71.9%
            tap_action:
              action: none
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_comedor.png
              cargando: /local/fulldash/ui/cleanUp/clean_comedor.png
              volviendo: /local/fulldash/ui/cleanUp/clean_comedor.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/ui/cleanUp/clean_comedorSelected.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano_uno: /local/fulldash/transparent.png
              bano_dos: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
            state_filter:
              cocina: display(none)
              mario: display(none)
              daniel: display(none)
            style:
              left: 41.16%
              top: 66.4%
              width: 21%
            tap_action:
              action: call-service
              service: script.clean_comedor
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_cocina.png
              cargando: /local/fulldash/ui/cleanUp/clean_cocina.png
              volviendo: /local/fulldash/ui/cleanUp/clean_cocina.png
              cocina: /local/fulldash/ui/cleanUp/clean_cocinaSelected.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano_uno: /local/fulldash/transparent.png
              bano_dos: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
              state_filter:
                "cocina": brightness(110%) saturate(1.2)

            style:
              left: 41.7%
              top: 32.8%
              width: 20%
            tap_action:
              action: call-service
              service: script.clean_cocina
            type: image

          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_mario.png
              cargando: /local/fulldash/ui/cleanUp/clean_mario.png
              volviendo: /local/fulldash/ui/cleanUp/clean_mario.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/ui/cleanUp/clean_marioSelected.png
              daniel: /local/fulldash/transparent.png
              bano_uno: /local/fulldash/transparent.png
              bano_dos: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png

            style:
              left: 57.2%
              top: 73%
              width: 12.6%
            tap_action:
              action: call-service
              service: script.clean_mario
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_daniel.png
              cargando: /local/fulldash/ui/cleanUp/clean_daniel.png
              volviendo: /local/fulldash/ui/cleanUp/clean_daniel.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/ui/cleanUp/clean_danielSelected.png
              bano_uno: /local/fulldash/transparent.png
              bano_dos: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 67.9%
              top: 53.9%
              width: 23.3%
            tap_action:
              action: call-service
              service: script.clean_daniel
            type: image
          ###################    BAÑO 1    ###################
          - type: custom:button-card
            show_name: false
            show_label: false
            show_state: false
            show_icon: false
            tap_action:
              action: call-service
              service: script.clean_bano1
            style:
              left: 56.9%
              top: 8.4%
              width: 12.6%
              height: 12%
              transform: rotate(-45deg)
            styles:
              card:
                - height: 100%
          - type: image
            entity: input_text.room_cleaning
            action: none
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_bano1.png
              cargando: /local/fulldash/ui/cleanUp/clean_bano1.png
              volviendo: /local/fulldash/ui/cleanUp/clean_bano1.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano1: /local/fulldash/ui/cleanUp/clean_bano1Selected.png
              bano2: /local/fulldash/transparent.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 63.6%
              top: 14.4%
              width: 14.4%
              pointer-events: none
            tap_action:
              action: call-service
              service: script.clean_bano1

          ###################    BAÑO 2    ###################
          - type: custom:button-card
            show_name: false
            show_label: false
            show_state: false
            show_icon: false
            tap_action:
              action: call-service
              service: script.clean_bano2
            style:
              left: 62.4%
              top: 17.4%
              width: 12.6%
              height: 12%
              transform: rotate(-45deg)
            styles:
              card:
                - height: 100%
          - type: image
            entity: input_text.room_cleaning
            action: none
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_bano2.png
              cargando: /local/fulldash/ui/cleanUp/clean_bano2.png
              volviendo: /local/fulldash/ui/cleanUp/clean_bano2.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano1: /local/fulldash/transparent.png
              bano2: /local/fulldash/ui/cleanUp/clean_bano2Selected.png
              principal: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 69.0%
              top: 22.8%
              width: 14.8%
              pointer-events: none
            tap_action:
              action: none
          ###################    ENTRADA    ###################
          - type: image
            entity: input_text.room_cleaning
            action: none
            hold_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_entrada.png
              cargando: /local/fulldash/ui/cleanUp/clean_entrada.png
              volviendo: /local/fulldash/ui/cleanUp/clean_entrada.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano1: /local/fulldash/transparent.png
              bano2: /local/fulldash/transparent.png
              entrada: /local/fulldash/ui/cleanUp/clean_entradaSelected.png
              principal: /local/fulldash/transparent.png
              casa: /local/fulldash/transparent.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 56.5%
              top: 42.9%
              width: 10.7%
            tap_action:
              action: call-service
              service: script.clean_entrada

          ###################    HABITACION PRINCIPAL    ###################
          - type: custom:button-card
            show_name: false
            show_label: false
            show_state: false
            show_icon: false
            tap_action:
              action: call-service
              service: script.clean_principal
            style:
              left: 87%
              top: 54%
              width: 15%
              height: 40%
            styles:
              card:
                - height: 100%
          - type: image
            entity: input_text.room_cleaning
            action: none
            hold_action:
              action: none
            tap_action:
              action: none
            state_image:
              pausa: /local/fulldash/ui/cleanUp/clean_principal.png
              cargando: /local/fulldash/ui/cleanUp/clean_principal.png
              volviendo: /local/fulldash/ui/cleanUp/clean_principal.png
              cocina: /local/fulldash/transparent.png
              comedor: /local/fulldash/transparent.png
              mario: /local/fulldash/transparent.png
              daniel: /local/fulldash/transparent.png
              bano1: /local/fulldash/transparent.png
              bano2: /local/fulldash/transparent.png
              entrada: /local/fulldash/transparent.png
              principal: /local/fulldash/ui/cleanUp/clean_principalSelected.png
              casa: /local/fulldash/transparent.png
            state_filter:
              comedor: display(none)
              cocina: display(none)
              mario: display(none)
            style:
              left: 79.7%
              top: 54.5%
              width: 36.1%
              pointer-events: none

          ###################    IMAGEN ASPIRADORA    ###################
          - action: none
            hold_action:
              action: none
            # image: /local/fulldash/ui/cleanUp/robotControlsBG.png
            image: /local/fulldash/ui/cleanUp/roborock-q5-pro.png
            style:
              left: 33%
              top: 12%
              width: 13%
            tap_action:
              action: none
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/fulldash/transparent.png
            style:
              left: 81.4%
              top: 89%
              width: 34%
              height: 18%
              border-radius: .8vw
              background-color: rgba(0, 0, 0, .3)
            tap_action:
              action: none
            type: image

          ########### Vacuum Robot Control Panel buttons ###########

          #   Note: uses input_text from configuration.yaml to show
          #   the right text, EG: "Cleaning Kitchen" status text

          - entity: input_text.fulldash_vacuum_status
            style:
              color: "rgba(255,255,255,1)"
              font-size: 1.3vw
              font-weight: 300
              left: 81.4%
              text-align: center
              top: 95%
              width: 20%
            type: state-label

          - action: none
            hold_action:
              action: none
            image: /local/fulldash/ui/cleanUp/btns/ring.png
            style:
              left: 85.4%
              top: 87%
              width: 6%
            tap_action:
              action: call-service
              service: vacuum.locate
              target:
                device_id: f8e4fb3c1db033eaf4cfa566f4aeed74
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/fulldash/ui/cleanUp/btns/gohome.png
            style:
              left: 93.4%
              top: 87%
              width: 6%
            tap_action:
              action: call-service
              service: vacuum.return_to_base
              target:
                device_id: f8e4fb3c1db033eaf4cfa566f4aeed74
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/fulldash/ui/cleanUp/btns/start.png
            style:
              left: 69.4%
              top: 87%
              width: 6%
            tap_action:
              action: call-service
              service: vacuum.start
              target:
                device_id: f8e4fb3c1db033eaf4cfa566f4aeed74
            type: image
            entity: input_text.room_cleaning
          - action: none
            hold_action:
              action: none
            image: /local/fulldash/ui/cleanUp/btns/pause.png
            style:
              left: 77.4%
              top: 87%
              width: 6%
            tap_action:
              action: call-service
              service: vacuum.pause
              target:
                device_id: f8e4fb3c1db033eaf4cfa566f4aeed74
            type: image

          - entity: sensor.vacuum_battery_icon
            style:
              "--iron-icon-height": 1.5vw
              "--iron-icon-width": 1.5vw
              left: 33%
              top: 15.5%
              opacity: .95
            type: state-icon
          # - entity: input_text.fulldash_vacuum_status
          #   style:
          #     color: "rgba(255,255,255,0.6)"
          #     font-size: 1.1vw
          #     font-weight: 300
          #     left: 46%
          #     text-align: center
          #     top: 12.5%
          #     width: 15%
          #   type: state-label
          #################################################################
          #                                                               #
          #                      SIDEBAR : Cleanup                        #
          #                                                               #
          #################################################################
          #########################    Background    #########################
          - action: none
            hold_action:
              action: none
            # image: /local/fulldash/ui/sidebar/sidebarBG2.png
            image: /local/fulldash/transparent.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
              background-color: rgba(40, 40, 40, .3)
            tap_action:
              action: none
            type: image

            #########################    TIME & DATE    #########################

          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.7)"
              font-size: 5vw
              font-weight: 200
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 6.4%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.5)"
              font-size: 1.6vw
              font-weight: 300
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 12.2%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label

            #########################   MENU BUTTONS   #########################
          - type: custom:button-card
            icon: mdi:floor-plan
            name: "Control habitaciones"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/0
            style:
              left: 1.4%
              top: 19%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .4)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px
          - type: custom:button-card
            icon: mdi:robot-vacuum
            name: "Limpieza"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/1
            style:
              left: 1.4%
              top: 29%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .15)
              --custom-inactive-menu: rgba(255,255,255, 1)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px

          - type: custom:button-card
            icon: mdi:view-dashboard-outline
            name: "Domótica"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/2
            style:
              left: 1.4%
              top: 39%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .5)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px

          #########################   PEOPLE   #########################

          - type: custom:mushroom-person-card
            entity: person.samuelmp
            secondary_info: last-updated
            icon_type: entity-picture
            layout: vertical
            style:
              left: 6.8%
              top: 72%
              --card-primary-font-weight: 400
              --card-secondary-font-weight: 400
              --icon-size: 4vw
          - type: custom:mushroom-person-card
            entity: person.paloma
            secondary_info: last-updated
            icon_type: entity-picture
            layout: vertical
            style:
              left: 15.8%
              top: 72%
              --card-primary-font-weight: 400
              --card-secondary-font-weight: 400
              --icon-size: 4vw

            #########################    TEMPERATURE MINI GRAPH (INSIDE vs OUTSIDE)    #########################

          - type: custom:mini-graph-card
            color_thresholds:
              - color: "#4dd2ff"
                value: 10
              - color: "#ffa31a"
                value: 20
              - color: "#ff1a1a"
                value: 28
            entities:
              - entity: sensor.nest_temperature
                color: "#0c87f7"
              - entity: sensor.nest_humidity
                color: "#ec085d"
                y_axis: secondary
              - entity: sensor.daystate_100
                color: grey
                name: Day
                show_legend: false
                show_line: false
                show_points: false
                y_axis: secondary
            icon: "mdi:home-thermometer-outline"
            name: Un nombre
            show:
              icon: true
              legend: false
              name: false
            card_mod:
              style: |
                :host {
                  left: 11.6%;
                  top:  92.5%;
                  width: 23.7%;
                  overflow: hidden;
                  height: 15%;
                  background: none  !important;
                  box-shadow: none !important;
                }
                .header {
                  font-size: 1vw;
                  position: absolute !important;
                  width: 5% !important;
                  padding: 0 !important;
                  right: 16% !important;
                  top: 15% !important;
                }
                ha-card {
                  background: none  !important;
                  padding: 0 !important;
                }
                .icon > ha-icon {
                  width:1.8vw !important;
                  height:1.8vw !important;
                }
                .state__time{
                  font-size:0.9vw !important;
                  margin-top: 0.2vw;
                  font-weight: 300 !important;
                  opacity: 0.4 !important;
                }
                .states {
                  font-size: 0.5vw !important;
                  padding: 1vw 0vw 0vw 0vw  !important;
                  margin: auto !important;
                  width: 80%;
                }
            tap_action: !include popup/footer_weather.yaml
            # tap_action:
            #   action: navigate
            #   navigation_path: /lovelace-full/4

            #########################    Mini Weather card    #########################

          - type: "custom:simple-weather-card"
            backdrop: false
            entity: weather.casa
            name: " "
            card_mod:
              style: |
                :host {
                  left: 11%;
                  top:  86%;
                  width: 19%;
                  height: 7% !important;
                  overflow: hidden;
                  height: 8.5vw;
                  background: none  !important;
                  box-shadow: none !important;
                  font-size: 1vw !important;
                }
                ha-card {
                  background: none  !important;
                  box-shadow: none !important;
                  flex-flow: row-reverse !important;
                  padding: 0 !important;
                }
                .weather__info--add{
                  display : none !important;
                }
                .weather__info{
                  flex-grow: 1;
                  min-height: 0 !important;
                  height: 2.4vw;
                  margin-left: 0.6vw;
                }
                .weather__icon{
                  margin-right:0.5% !important;
                  margin-top: -3%;
                  width: 2vw !important;
                  height: 2vw !important;
                  flex: 0 0 2vw !important;
                }
  #################################################################
  #                                                               #
  #                      DOMÓTICA                                 #
  #                                                               #
  #################################################################
  - title: Domótica
    icon: mdi:view-dashboard-outline
    panel: true
    cards:
      - type: picture-elements
        image: /local/fulldash/transparent.png
        card_mod:
          style:
            hui-image $: |
              :host {
                {% if states('sun.sun') == 'below_horizon' %}
                background-image: url(/local/background14.jpg);
                background-size: cover;
                {% else %}
                background-image: url(/local/background5.jpg);
                {% endif %}
              }
              img {
                filter: brightness(1.25);
              }
        elements:
          #################################################################
          #                      DOMÓTICA SIDEBAR                         #
          #################################################################

          #########################    BG IMAGE    ########################
          - action: none
            hold_action:
              action: none
            # image: /local/fulldash/ui/sidebar/sidebarBG2.png
            image: /local/fulldash/transparent.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
              background-color: rgba(40, 40, 40, .3)
            tap_action:
              action: none
            type: image

          #########################    TIME AND DATE    #########################
          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.7)"
              font-size: 5vw
              font-weight: 200
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 6.4%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: "rgba(255, 255, 255, 0.5)"
              font-size: 1.6vw
              font-weight: 300
              left: 11.73828125%
              letter-spacing: "-0.05vw"
              top: 12.2%
              width: 23.4765625%
              display: block
              text-align: center
            tap_action:
              action: none
            type: state-label

          #########################    MENU BUTTONS    #########################
          - type: custom:button-card
            icon: mdi:floor-plan
            name: "Control habitaciones"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/0
            style:
              left: 1.4%
              top: 19%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .5)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px
          - type: custom:button-card
            icon: mdi:robot-vacuum
            name: "Limpieza"
            layout: icon_name
            tap_action:
              action: navigate
              navigation_path: /lovelace-full/1
            style:
              left: 1.4%
              top: 29%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .02)
              --custom-inactive-menu: rgba(255,255,255, .5)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: var(--custom-inactive-menu)
                - font-weight: 400;
              icon:
                - color: var(--custom-inactive-menu)
                - fill: var(--custom-inactive-menu)
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px
          - type: custom:button-card
            icon: mdi:view-dashboard-outline
            name: "Domótica"
            layout: icon_name
            tap_action: none
            style:
              left: 1.4%
              top: 43%
              width: 20.5%
              height: 6%
              transform: scale(1,1)
              --ha-card-border-radius: 2vw
              --ha-card-background: rgba(255, 255, 255, .15)
              --custom-inactive-menu: rgba(255,255,255, 1)
              --icon-primary-color: var(--custom-inactive-menu)
            styles:
              grid:
                - grid-template-columns: 22% 78%
              name:
                - justify-self: start
                - padding-left: 1.1vw
                - font-size: 1.3vw
                - color: "#FFFFFF"
                - font-weight: 400;
              icon:
                - color: "#FFFFFF"
                - margin: .5rem .7rem;
                - width: 60%
              card:
                - padding: 2% 0px

            # - action: none
            #   image: /local/fulldash/ui/sidebar/media_off.png
            #   style:
            #     left: 11.7%
            #     top: 42%
            #     width: 20.5078125%
            #   tap_action:
            #     action: navigate
            #     navigation_path: /lovelace-full/2
            #   hold_action:
            #     action: none
            #   type: image
            # - action: none
            #   image: /local/fulldash/ui/sidebar/health_off.png
            #   style:
            #     left: 11.7%
            #     top: 50%
            #     width: 20.5078125%
            #   tap_action:
            #     action: navigate
            #     navigation_path: /lovelace-full/4
            #   type: image

            #########################    People at home    #########################

            #Optional label for people at Home (currently hidden with opacity: 0)

          # - style:
          #     color: white
          #     font-size: 1vw
          #     font-weight: 300
          #     left: 8.8%
          #     opacity: 1
          #     top: 66%
          #     width: 10%
          #   text: "People at home:"
          #   type: "custom:text-element"

          - action: none
            entity: person.samuelmp
            state_image:
              home: /api/image/serve/c27758e72a0df0cd2b651c7b9a7fe577/512x512
              not_home: /api/image/serve/c27758e72a0df0cd2b651c7b9a7fe577/512x512
            style:
              background-color: "rgba(255, 255, 255, 0.0)"
              border-radius: 10vw
              height: 4vw
              left: 6.8%
              top: 72%
              width: 4vw
              filter: '${ states[''person.samuelmp''].state == "home" ? "" : "grayscale(.3) blur(.8px) opacity(0.5) brightness(0.5)" }'

            tap_action: none
            type: image

          - action: none
            entity: person.paloma
            state_image:
              home: /api/image/serve/03813b6da85b92d3e5ce60a47e2e9417/512x512
              not_home: /api/image/serve/03813b6da85b92d3e5ce60a47e2e9417/512x512
            style:
              background-color: "rgba(255, 255, 255, 0.0)"
              border-radius: 10vw
              height: 4vw
              left: 15.8%
              top: 72%
              width: 4vw
              filter: '${ states[''person.paloma''].state == "home" ? "" : "grayscale(.3) blur(.8px) opacity(0.5) brightness(0.5)" }'

            tap_action: none
            type: image

            # - action: none
            #   image: /local/fulldash/transparent.png
            #   style:
            #     background-color: 'rgba(255, 255, 255, 0.0)'
            #     border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
            #     border-radius: 10vw
            #     height: 4.2vw
            #     left: 15.9%
            #     top: 72.2%
            #     width: 4.2vw
            #   tap_action: none
            #   type: image
            # - action: none
            #   image: /local/fulldash/transparent.png
            #   style:
            #     background-color: 'rgba(255, 255, 255, 0.0)'
            #     border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
            #     border-radius: 10vw
            #     height: 4.2vw
            #     left: 21.1%
            #     top: 72.2%
            #     width: 4.2vw
            #   tap_action: none
            #   type: image
            #########################    Minigraph to show temperature inside and out    #########################
          - type: custom:mini-graph-card
            color_thresholds:
              - color: "#4dd2ff"
                value: 10
              - color: "#ffa31a"
                value: 20
              - color: "#ff1a1a"
                value: 28
            entities:
              - entity: sensor.nest_temperature
                color: "#0c87f7"
              - entity: sensor.nest_humidity
                color: "#ec085d"
                y_axis: secondary
              - entity: sensor.daystate_100
                color: grey
                name: Day
                show_legend: false
                show_line: false
                show_points: false
                y_axis: secondary
            icon: "mdi:home-thermometer-outline"
            name: Un nombre
            show:
              icon: true
              legend: false
              name: false
            card_mod:
              style: |
                :host {
                  left: 11.6%;
                  top:  92.5%;
                  width: 23.7%;
                  overflow: hidden;
                  height: 15%;
                  background: none  !important;
                  box-shadow: none !important;
                }
                .header {
                  font-size: 1vw;
                  position: absolute !important;
                  width: 5% !important;
                  padding: 0 !important;
                  right: 16% !important;
                  top: 15% !important;
                }
                ha-card {
                  background: none  !important;
                  padding: 0 !important;
                }
                .icon > ha-icon {
                  width:1.8vw !important;
                  height:1.8vw !important;
                }
                .state__time{
                  font-size:0.9vw !important;
                  margin-top: 0.2vw;
                  font-weight: 300 !important;
                  opacity: 0.4 !important;
                }
                .states {
                  font-size: 0.5vw !important;
                  padding: 1vw 0vw 0vw 0vw  !important;
                  margin: auto !important;
                  width: 80%;
                }
            # tap_action:
            #   action: navigate
            #   navigation_path: /lovelace-full/4

            #########################    Mini Weather card    #########################

          - type: "custom:simple-weather-card"
            backdrop: false
            entity: weather.casa
            name: " "
            card_mod:
              style: |
                :host {
                  left: 11%;
                  top:  86%;
                  width: 19%;
                  height: 7% !important;
                  overflow: hidden;
                  height: 8.5vw;
                  background: none  !important;
                  box-shadow: none !important;
                  font-size: 1vw !important;
                }
                ha-card {
                  background: none  !important;
                  box-shadow: none !important;
                  flex-flow: row-reverse !important;
                  padding: 0 !important;
                }
                .weather__info--add{
                  display : none !important;
                }
                .weather__info{
                  flex-grow: 1;
                  min-height: 0 !important;
                  height: 2.4vw;
                  margin-left: 0.6vw;
                }
                .weather__icon{
                  margin-right:0.5% !important;
                  margin-top: -3%;
                  width: 2vw !important;
                  height: 2vw !important;
                  flex: 0 0 2vw !important;
                }

          - type: custom:button-card
            entity: switch.super_regleta
            name: Regleta
            template:
              - socket
            variables:
              power_entity: sensor.consumo_regleta_comedor
              title: Super regleta
              energy: sensor.acumulado_diario_super_regleta

            hold_action:
              action: block
              ui_sound_tablet: undefined
              card_bounce: undefined
